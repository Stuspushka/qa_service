# Q&A API Service

ะกะตัะฒะธั ะฒะพะฟัะพัะพะฒ ะธ ะพัะฒะตัะพะฒ ะฝะฐ FastAPI + PostgreSQL + Docker.

---

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

<pre>
qa_service/
โโโ alembic/ # ะะธะณัะฐัะธะธ Alembic
โ โโโ versions/ # ะคะฐะนะปั ัะตะฒะธะทะธะน
โ โโโ env.py
โโโ app/
โ โโโ api/
โ โ โโโ questions.py # ะะพััั ะฒะพะฟัะพัะพะฒ
โ โ โโโ answers.py # ะะพััั ะพัะฒะตัะพะฒ
โ โโโ core/
โ โ โโโ db.py # SQLAlchemy engine ะธ ัะตััะธะธ
โ โ โโโ config.py # ะะฐัััะพะนะบะธ ะฟัะธะปะพะถะตะฝะธั (Pydantic Settings)
โ โ โโโ logger.py # ะะพะณะธัะพะฒะฐะฝะธะต
โ โโโ models/
โ โ โโโ init.py
โ โ โโโ questions.py
โ โ โโโ answers.py
โ โโโ schemas/
โ โ โโโ init.py
โ โ โโโ questions_schema.py
โ โ โโโ answers_schema.py
โ โโโ main.py # FastAPI ะฟัะธะปะพะถะตะฝะธะต
โโโ tests/
โ โโโ conftest.py
โ โโโ test_questions.py
โ โโโ test_answers.py
โโโ Dockerfile
โโโ docker-compose.yml
โโโ requirements.txt
โโโ README.md
</pre>

---

## โ๏ธ ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ ัะตัะตะท Docker

1. ะกะฑะพัะบะฐ ะธ ะทะฐะฟััะบ ะบะพะฝัะตะนะฝะตัะพะฒ:

```bash
docker-compose up --build

    ะัะพะฒะตัะบะฐ ะดะพัััะฟะฝะพััะธ API:

    Healthcheck: http://localhost:8000/health

    Swagger UI: http://localhost:8000/docs
```

๐ ะะธะณัะฐัะธะธ Alembic

ะกะพะทะดะฐะฝะธะต ัะตะฒะธะทะธะธ ะธ ะฟัะธะผะตะฝะตะฝะธะต ะผะธะณัะฐัะธะน:

docker-compose run --rm web alembic revision --autogenerate -m "init models"
docker-compose run --rm web alembic upgrade head

    ะขะฐะฑะปะธัั questions ะธ answers ะฑัะดัั ัะพะทะดะฐะฝั ะฒ PostgreSQL.

## ๐ API ะญะฝะดะฟะพะธะฝัั

ะะพะฟัะพัั

ะะตัะพะด	URL	ะะฟะธัะฐะฝะธะต
```Pre
GET	/questions/	ะกะฟะธัะพะบ ะฒัะตั ะฒะพะฟัะพัะพะฒ
POST	/questions/	ะกะพะทะดะฐัั ะฝะพะฒัะน ะฒะพะฟัะพั
ะัะธะผะตั: {"text": "ะขะตะบัั ะฒะพะฟัะพัะฐ"}
GET	/questions/{id}	ะะพะปััะธัั ะฒะพะฟัะพั ะธ ะฒัะต ะพัะฒะตัั
DELETE	/questions/{id}	ะฃะดะฐะปะธัั ะฒะพะฟัะพั (ะบะฐัะบะฐะดะฝะพะต ัะดะฐะปะตะฝะธะต ะพัะฒะตัะพะฒ)
```
ะัะฒะตัั

ะะตัะพะด	URL	ะะฟะธัะฐะฝะธะต
```Pre
POST	/questions/{id}/answers/	ะะพะฑะฐะฒะธัั ะพัะฒะตั ะบ ะฒะพะฟัะพัั
ะัะธะผะตั: {"user_id": "uuid", "text": "ะขะตะบัั ะพัะฒะตัะฐ"}
GET	/answers/{id}	ะะพะปััะธัั ะบะพะฝะบัะตัะฝัะน ะพัะฒะตั
DELETE	/answers/{id}	ะฃะดะฐะปะธัั ะพัะฒะตั
```
## ๐ ะะพะณะธัะพะฒะฐะฝะธะต

    ะัะต CRUD ะพะฟะตัะฐัะธะธ ะปะพะณะธัััััั ัะตัะตะท app/core/logger.py.

    ะัะธะผะตั:
```bash
2025-08-29 12:00:01 [INFO] qa_service: Question created: id=1, text='ะงัะพ ัะฐะบะพะต FastAPI?'
2025-08-29 12:00:05 [INFO] qa_service: Answer created: id=1 for question_id=1 by user=123e4567
2025-08-29 12:00:10 [WARNING] qa_service: Tried to delete non-existent answer id=99
```
    [INFO] โ ััะฟะตัะฝัะต ะพะฟะตัะฐัะธะธ

    [WARNING] โ ะฟัะตะดัะฟัะตะถะดะตะฝะธั (ะฝะฐะฟัะธะผะตั, ะพะฑัะตะบั ะฝะต ะฝะฐะนะดะตะฝ)

    [ERROR] โ ะฝะตะพะฑัะฐะฑะพัะฐะฝะฝัะต ะพัะธะฑะบะธ ัะตัะตะท ะณะปะพะฑะฐะปัะฝัะน exception handler

## ๐งช ะขะตััั

ะขะตััั ะฝะฐัะพะดัััั ะฒ tests/

ะคะธะบััััั ะธัะฟะพะปัะทััั SQLite in-memory.

ะะฐะฟััะบ ัะตััะพะฒ:
```bash
docker-compose run --rm web pytest -v
```
ะัะพะฒะตัััััั:

    ะกะพะทะดะฐะฝะธะต ะธ ะฟะพะปััะตะฝะธะต ะฒะพะฟัะพัะพะฒ
  
    ะะพะฑะฐะฒะปะตะฝะธะต ะธ ัะดะฐะปะตะฝะธะต ะพัะฒะตัะพะฒ
  
    ะะฐัะบะฐะดะฝะพะต ัะดะฐะปะตะฝะธะต ะฒะพะฟัะพัะพะฒ ั ะพัะฒะตัะฐะผะธ

## ๐ ะัะพะฑะตะฝะฝะพััะธ

    FastAPI + SQLAlchemy + PostgreSQL

    Pydantic

    Docker + docker-compose

    ะะธะณัะฐัะธะธ Alembic

    ะะพะณะธัะพะฒะฐะฝะธะต CRUD ะพะฟะตัะฐัะธะน ะธ ะพัะธะฑะพะบ

    ะัะพัััะต ัะตััั ั pytest

## ๐ฆ ะัะธะผะตัะฐะฝะธะต

    ะะปั ะปะพะบะฐะปัะฝะพะณะพ ะฟะพะดะบะปััะตะฝะธั ะบ ะฑะฐะทะต (ะธะท PyCharm, DBeaver) ะธัะฟะพะปัะทัะนัะต ะฟะพัั 5432 ะธะปะธ ะธะทะผะตะฝะธัะต ะฒ docker-compose.yml.

    ะัะต ะผะธะณัะฐัะธะธ ะฒัะฟะพะปะฝััััั ัะตัะตะท ะบะพะฝัะตะนะฝะตั web.
